
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>narrow_down package &#8212; narrow-down 0.5.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="narrow_down.proto package" href="narrow_down.proto.html" />
    <link rel="prev" title="narrow_down" href="modules.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="narrow_down.proto.html" title="narrow_down.proto package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="narrow_down"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">narrow-down 0.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" accesskey="U">narrow_down</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">narrow_down package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="narrow-down-package">
<h1>narrow_down package<a class="headerlink" href="#narrow-down-package" title="Permalink to this headline">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="narrow_down.proto.html">narrow_down.proto package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="narrow_down.proto.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="narrow_down.proto.html#module-narrow_down.proto.stored_document_pb2">narrow_down.proto.stored_document_pb2 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="narrow_down.proto.html#module-narrow_down.proto">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-narrow_down.data_types">
<span id="narrow-down-data-types-module"></span><h2>narrow_down.data_types module<a class="headerlink" href="#module-narrow_down.data_types" title="Permalink to this headline">¶</a></h2>
<p>Type definitions of pure data classes and abstract types.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="narrow_down.data_types.AlreadyInitialized">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.data_types.</span></span><span class="sig-name descname"><span class="pre">AlreadyInitialized</span></span><a class="reference internal" href="_modules/narrow_down/data_types.html#AlreadyInitialized"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.AlreadyInitialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when initializing storage twice or changing immutable settings.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="narrow_down.data_types.Fingerprint">
<span class="sig-prename descclassname"><span class="pre">narrow_down.data_types.</span></span><span class="sig-name descname"><span class="pre">Fingerprint</span></span><a class="headerlink" href="#narrow_down.data_types.Fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Type representing the result of a minhashing operation</p>
<p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.uint32</span></code>]]</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.data_types.StorageLevel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.data_types.</span></span><span class="sig-name descname"><span class="pre">StorageLevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/data_types.html#StorageLevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.StorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Flag</span></code></p>
<p>Detail level of document persistence.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StorageLevel.Document">
<span class="sig-name descname"><span class="pre">Document</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#narrow_down.data_types.StorageLevel.Document" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StorageLevel.Fingerprint">
<span class="sig-name descname"><span class="pre">Fingerprint</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#narrow_down.data_types.StorageLevel.Fingerprint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StorageLevel.Full">
<span class="sig-name descname"><span class="pre">Full</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">7</span></em><a class="headerlink" href="#narrow_down.data_types.StorageLevel.Full" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StorageLevel.Minimal">
<span class="sig-name descname"><span class="pre">Minimal</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#narrow_down.data_types.StorageLevel.Minimal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.data_types.</span></span><span class="sig-name descname"><span class="pre">StoredDocument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_part</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Fingerprint</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/data_types.html#StoredDocument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.StoredDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data object combining all possible fields of a document stored.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.data">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#narrow_down.data_types.StoredDocument.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Payload to persist together with the document in the internal data structures.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.deserialize">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">deserialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.data_types.StoredDocument" title="narrow_down.data_types.StoredDocument"><span class="pre">narrow_down.data_types.StoredDocument</span></a></span></span><a class="reference internal" href="_modules/narrow_down/data_types.html#StoredDocument.deserialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.StoredDocument.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserialize a document from bytes.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.document">
<span class="sig-name descname"><span class="pre">document</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#narrow_down.data_types.StoredDocument.document" title="Permalink to this definition">¶</a></dt>
<dd><p>The actual content to use for fuzzy matching, e.g. a full unprocessed sentence.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.exact_part">
<span class="sig-name descname"><span class="pre">exact_part</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#narrow_down.data_types.StoredDocument.exact_part" title="Permalink to this definition">¶</a></dt>
<dd><p>A string which should be matched exactly.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.fingerprint">
<span class="sig-name descname"><span class="pre">fingerprint</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Fingerprint</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#narrow_down.data_types.StoredDocument.fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>A fuzzy fingerprint of the document, e.g. a Minhash.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.id_">
<span class="sig-name descname"><span class="pre">id_</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#narrow_down.data_types.StoredDocument.id_" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifier used to distinguish the document from an identical one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.serialize">
<span class="sig-name descname"><span class="pre">serialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#narrow_down.data_types.StorageLevel" title="narrow_down.data_types.StorageLevel"><span class="pre">narrow_down.data_types.StorageLevel</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/narrow_down/data_types.html#StoredDocument.serialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.StoredDocument.serialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize a document to bytes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.data_types.StoredDocument.without">
<span class="sig-name descname"><span class="pre">without</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.data_types.StoredDocument" title="narrow_down.data_types.StoredDocument"><span class="pre">narrow_down.data_types.StoredDocument</span></a></span></span><a class="reference internal" href="_modules/narrow_down/data_types.html#StoredDocument.without"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.StoredDocument.without" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy with the specified attributes left out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>attributes</strong> – The names of the attributes to leave empty</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A copy of the StoredDocument with all the attributes specified in attributes left out.
So they will have their default value (None).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="narrow_down.data_types.TooLowStorageLevel">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.data_types.</span></span><span class="sig-name descname"><span class="pre">TooLowStorageLevel</span></span><a class="reference internal" href="_modules/narrow_down/data_types.html#TooLowStorageLevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.data_types.TooLowStorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised if a feature is used for which a higher storage level is needed.</p>
</dd></dl>

</section>
<section id="module-narrow_down.hash">
<span id="narrow-down-hash-module"></span><h2>narrow_down.hash module<a class="headerlink" href="#module-narrow_down.hash" title="Permalink to this headline">¶</a></h2>
<p>Hash algorithms.</p>
<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.hash.HashAlgorithm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.hash.</span></span><span class="sig-name descname"><span class="pre">HashAlgorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/hash.html#HashAlgorithm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.hash.HashAlgorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Flag</span></code></p>
<p>Enum of available hash algorithms.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.hash.HashAlgorithm.Murmur3_32bit">
<span class="sig-name descname"><span class="pre">Murmur3_32bit</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#narrow_down.hash.HashAlgorithm.Murmur3_32bit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.hash.HashAlgorithm.Xxhash_32bit">
<span class="sig-name descname"><span class="pre">Xxhash_32bit</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#narrow_down.hash.HashAlgorithm.Xxhash_32bit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="narrow_down.hash.HashAlgorithm.Xxhash_64bit">
<span class="sig-name descname"><span class="pre">Xxhash_64bit</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#narrow_down.hash.HashAlgorithm.Xxhash_64bit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="narrow_down.hash.murmur3_32bit">
<span class="sig-prename descclassname"><span class="pre">narrow_down.hash.</span></span><span class="sig-name descname"><span class="pre">murmur3_32bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#narrow_down.hash.murmur3_32bit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 32 bit murmur3 hash of the input string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="narrow_down.hash.xxhash_32bit">
<span class="sig-prename descclassname"><span class="pre">narrow_down.hash.</span></span><span class="sig-name descname"><span class="pre">xxhash_32bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#narrow_down.hash.xxhash_32bit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 32 bit xxhash of the input string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="narrow_down.hash.xxhash_64bit">
<span class="sig-prename descclassname"><span class="pre">narrow_down.hash.</span></span><span class="sig-name descname"><span class="pre">xxhash_64bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#narrow_down.hash.xxhash_64bit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 64 bit xxhash of the input string.</p>
</dd></dl>

</section>
<section id="module-narrow_down.scylladb">
<span id="narrow-down-scylladb-module"></span><h2>narrow_down.scylladb module<a class="headerlink" href="#module-narrow_down.scylladb" title="Permalink to this headline">¶</a></h2>
<p>Storage backend based on ScyllaDB.</p>
<p>ScyllaDB is a low-latency distributed key-value store, compatible with the Apache Cassandra
protocol. For details see <span class="target" id="https-www-scylladb-com">https://www.scylladb.com/</span>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.scylladb.</span></span><span class="sig-name descname"><span class="pre">ScyllaDBStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_or_session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">cassandra.cluster.Cluster</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">cassandra.cluster.Session</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyspace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">narrow_down.storage.StorageBackend</span></code></a></p>
<p>Storage backend for a SimilarityStore using ScyllaDB.</p>
<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_or_session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">cassandra.cluster.Cluster</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">cassandra.cluster.Session</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyspace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new empty or connect to an existing SQLite database.</p>
<p>TODO: Describe cluster/session</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_or_session</strong> – Can be a cassandra cluster or a session object.</p></li>
<li><p><strong>keyspace</strong> – Name of the keyspace to use.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – When the keyspace name is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.add_document_to_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_document_to_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.add_document_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.add_document_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Link a document to a bucket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.initialize">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.scylladb.ScyllaDBStore" title="narrow_down.scylladb.ScyllaDBStore"><span class="pre">narrow_down.scylladb.ScyllaDBStore</span></a></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the tables in the SQLite database file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#narrow_down.data_types.AlreadyInitialized" title="narrow_down.data_types.AlreadyInitialized"><strong>AlreadyInitialized</strong></a> – If the database file is already initialized</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.insert_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.insert_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.insert_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the data of a document to the storage and return its ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.insert_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.insert_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.insert_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a setting as key-value pair.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.query_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.query_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.query_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data belonging to a document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document_id</strong> – The id of the document. This ID is created and returned by the
<cite>insert_document</cite> method.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The document stored under the key <cite>document_id</cite> as bytes object.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – If the document is not stored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.query_ids_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_ids_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.query_ids_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.query_ids_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all document IDs stored in a bucket for a certain hash value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.query_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.query_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.query_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a setting with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – The identifier of the setting</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with the value. If the key does not exist or the storage is uninitialized
None is returned.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>cassandra.DriverException</strong> – In case the database query fails for any reason.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.remove_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.remove_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.remove_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document given by ID from the list of documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.scylladb.ScyllaDBStore.remove_id_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_id_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/scylladb.html#ScyllaDBStore.remove_id_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.scylladb.ScyllaDBStore.remove_id_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document from a bucket.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-narrow_down.similarity_store">
<span id="narrow-down-similarity-store-module"></span><h2>narrow_down.similarity_store module<a class="headerlink" href="#module-narrow_down.similarity_store" title="Permalink to this headline">¶</a></h2>
<p>High-level API for indexing and retrieval of documents.</p>
<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.similarity_store.</span></span><span class="sig-name descname"><span class="pre">SimilarityStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><span class="pre">narrow_down.storage.StorageBackend</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#narrow_down.data_types.StorageLevel" title="narrow_down.data_types.StorageLevel"><span class="pre">narrow_down.data_types.StorageLevel</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">StorageLevel.Minimal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_false_negative_proba</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_false_positive_proba</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">similarity_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.75</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Storage class for indexing and fuzzy search of documents.</p>
<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><span class="pre">narrow_down.storage.StorageBackend</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#narrow_down.data_types.StorageLevel" title="narrow_down.data_types.StorageLevel"><span class="pre">narrow_down.data_types.StorageLevel</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">StorageLevel.Minimal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_false_negative_proba</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_false_positive_proba</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">similarity_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.75</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new SimilarityStore object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> – Storage backend to use for persisting the data. Per default this is an
in-memory backend.</p></li>
<li><p><strong>storage_level</strong> – The granularity of the internal storage mechanism. Per default nothing
than the document IDs are stored.</p></li>
<li><p><strong>tokenize</strong> – <p>The tokenization function to use to split the documents into smaller parts.
E.g. the document may be split into words or into character n-grams. Per default
word 3-grams are used.</p>
<p>Built-in tokenizers can be used by passing their name and parameters as string.
Options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;word_ngrams(n)&quot;</span></code> enables the word-ngram tokenizer
<code class="xref py py-func docutils literal notranslate"><span class="pre">narrow_down._tokenize.word_ngrams()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;char_ngrams(n)&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;char_ngrams(n,c)&quot;</span></code> enables the character-ngram
tokenizer <code class="xref py py-func docutils literal notranslate"><span class="pre">narrow_down._tokenize.char_ngrams()</span></code>.</p></li>
</ul>
<p>It is also possible to pass a custom function (not as string in this case, but
the function itself). In this case it needs to be taken care to specify the same
function again when saving and re-creating the SimilarityStore object.</p>
</p></li>
<li><p><strong>max_false_negative_proba</strong> – The target probability for false negatives. Setting this
higher decreases the risk of not finding a similar document, but it leads to slower
processing and more storage consumption.</p></li>
<li><p><strong>max_false_positive_proba</strong> – The target probability for false positives. Setting this
higher decreases the risk of finding documents which are in reality not similar,
but it leads to slower processing and more storage consumption.</p></li>
<li><p><strong>similarity_threshold</strong> – The minimum Jaccard similarity threshold used to identify two
documents as being similar.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – <p>If the function specified with <code class="docutils literal notranslate"><span class="pre">tokenize</span></code> cannot be found.</p>
<p># noqa: DAR101</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.initialize">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the internal storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#narrow_down.data_types.AlreadyInitialized" title="narrow_down.data_types.AlreadyInitialized"><strong>AlreadyInitialized</strong></a> – When the object or the underlying storage had already be
    initialized before.</p>
</dd>
</dl>
<p>Must be called exactly once for a new object. Should not be called when connecting to an
existing database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.insert">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_part</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Index a new document.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.load_from_storage">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_from_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><span class="pre">narrow_down.storage.StorageBackend</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.similarity_store.SimilarityStore" title="narrow_down.similarity_store.SimilarityStore"><span class="pre">narrow_down.similarity_store.SimilarityStore</span></a></span></span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.load_from_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.load_from_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a SimilarityStore object from already initialized storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> – A StorageBackend object which must already have been initialized by a
SimilarityStore object before.</p></li>
<li><p><strong>tokenize</strong> – The tokenization function originally specified in the init when initializing
the Similarity Store. See <code class="xref py py-func docutils literal notranslate"><span class="pre">narrow_down.SimilarityStore.__init__()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A SimilarityStore object using the given storage backend and with the settings stored
in the storage.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – If settings in the storage are missing, corrupt or cannot be deserialized.</p></li>
<li><p><strong>ValueError</strong> – If the function specified with <code class="docutils literal notranslate"><span class="pre">tokenize</span></code> cannot be found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.query">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_part</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Collection</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#narrow_down.data_types.StoredDocument" title="narrow_down.data_types.StoredDocument"><span class="pre">narrow_down.data_types.StoredDocument</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query all similar documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.similarity_store.SimilarityStore.remove_by_id">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_if_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/narrow_down/similarity_store.html#SimilarityStore.remove_by_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.similarity_store.SimilarityStore.remove_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the document with the given ID from the internal data structures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document_id</strong> – ID of the document to remove.</p></li>
<li><p><strong>check_if_exists</strong> – Raise a KeyError if the document does not exist.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>KeyError</strong> – If no document with the given ID is stored.</p></li>
<li><p><a class="reference internal" href="#narrow_down.data_types.TooLowStorageLevel" title="narrow_down.data_types.TooLowStorageLevel"><strong>TooLowStorageLevel</strong></a> – If the storage level is too low and fingerprints are not available.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method is only usable with StorageLevel ‘Fingerprint’ or higher.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-narrow_down.sqlite">
<span id="narrow-down-sqlite-module"></span><h2>narrow_down.sqlite module<a class="headerlink" href="#module-narrow_down.sqlite" title="Permalink to this headline">¶</a></h2>
<p>Storage backend based on SQLite.</p>
<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.sqlite.</span></span><span class="sig-name descname"><span class="pre">SQLiteStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">narrow_down.storage.StorageBackend</span></code></a></p>
<p>File-based storage backend for a SimilarityStore based on SQLite.</p>
<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new empty or connect to an existing SQLite database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.add_document_to_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_document_to_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.add_document_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.add_document_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Link a document to a bucket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.initialize">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.sqlite.SQLiteStore" title="narrow_down.sqlite.SQLiteStore"><span class="pre">narrow_down.sqlite.SQLiteStore</span></a></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the tables in the SQLite database file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#narrow_down.data_types.AlreadyInitialized" title="narrow_down.data_types.AlreadyInitialized"><strong>AlreadyInitialized</strong></a> – If the database file is already initialized</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.insert_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.insert_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.insert_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the data of a document to the storage and return its ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.insert_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.insert_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.insert_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a setting as key-value pair.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.query_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.query_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.query_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data belonging to a document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document_id</strong> – The id of the document. This ID is created and returned by the
<cite>insert_document</cite> method.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The document stored under the key <cite>document_id</cite> as bytes object.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – If the document is not stored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.query_ids_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_ids_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.query_ids_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.query_ids_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all document IDs stored in a bucket for a certain hash value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.query_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.query_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.query_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a setting with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – The identifier of the setting</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with the value. If the key does not exist or the storage is uninitialized
None is returned.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>sqlite3.OperationalError</strong> – In case the database query fails for any reason.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.remove_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.remove_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.remove_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document given by ID from the list of documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.sqlite.SQLiteStore.remove_id_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_id_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/sqlite.html#SQLiteStore.remove_id_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.sqlite.SQLiteStore.remove_id_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document from a bucket.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-narrow_down.storage">
<span id="narrow-down-storage-module"></span><h2>narrow_down.storage module<a class="headerlink" href="#module-narrow_down.storage" title="Permalink to this headline">¶</a></h2>
<p>Base classes and interfaces for storage.</p>
<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.storage.</span></span><span class="sig-name descname"><span class="pre">InMemoryStore</span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">narrow_down.storage.StorageBackend</span></code></a></p>
<p>In-Memory storage backend for a SimilarityStore.</p>
<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new empty in memory database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.add_document_to_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_document_to_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.add_document_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.add_document_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Link a document to a bucket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.insert_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.insert_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.insert_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the data of a document to the storage and return its ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.insert_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.insert_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.insert_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a setting as key-value pair.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.query_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.query_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.query_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data belonging to a document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document_id</strong> – The id of the document. This ID is created and returned by the
<cite>insert_document</cite> method.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The document stored under the key <cite>document_id</cite> as bytes object.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – If the document is not stored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.query_ids_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_ids_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.query_ids_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.query_ids_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all document IDs stored in a bucket for a certain hash value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.query_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.query_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.query_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a setting with the given key.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.remove_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.remove_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.remove_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document given by ID from the list of documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.InMemoryStore.remove_id_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_id_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#InMemoryStore.remove_id_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.InMemoryStore.remove_id_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document from a bucket.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">narrow_down.storage.</span></span><span class="sig-name descname"><span class="pre">StorageBackend</span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Storage backend for a SimilarityStore.</p>
<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.add_document_to_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_document_to_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.add_document_to_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.add_document_to_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Link a document to a bucket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.initialize">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#narrow_down.storage.StorageBackend" title="narrow_down.storage.StorageBackend"><span class="pre">narrow_down.storage.StorageBackend</span></a></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>self</p>
</dd>
</dl>
<p>Implementations may raise an error if the backend is already initialized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.insert_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.insert_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.insert_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the data of a document to the storage and return its ID.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.insert_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">insert_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.insert_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.insert_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a setting as key-value pair.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.query_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.query_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.query_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data belonging to a document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document_id</strong> – Key under which the data is stored.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>KeyError</strong> – If no document with the given ID is stored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.query_ids_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_ids_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.query_ids_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.query_ids_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all document IDs stored in a bucket for a certain hash value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.query_setting">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.query_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.query_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a setting with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – The identifier of the setting</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with the value. If the key does not exist or the storage is uninitialized
None is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.remove_document">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.remove_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.remove_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document given by ID from the list of documents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="narrow_down.storage.StorageBackend.remove_id_from_bucket">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_id_from_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bucket_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/narrow_down/storage.html#StorageBackend.remove_id_from_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#narrow_down.storage.StorageBackend.remove_id_from_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a document from a bucket.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-narrow_down">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-narrow_down" title="Permalink to this headline">¶</a></h2>
<p>Top-level package for narrow-down.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">narrow_down package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-narrow_down.data_types">narrow_down.data_types module</a></li>
<li><a class="reference internal" href="#module-narrow_down.hash">narrow_down.hash module</a></li>
<li><a class="reference internal" href="#module-narrow_down.scylladb">narrow_down.scylladb module</a></li>
<li><a class="reference internal" href="#module-narrow_down.similarity_store">narrow_down.similarity_store module</a></li>
<li><a class="reference internal" href="#module-narrow_down.sqlite">narrow_down.sqlite module</a></li>
<li><a class="reference internal" href="#module-narrow_down.storage">narrow_down.storage module</a></li>
<li><a class="reference internal" href="#module-narrow_down">Module contents</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="modules.html"
                          title="previous chapter">narrow_down</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="narrow_down.proto.html"
                          title="next chapter">narrow_down.proto package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/narrow_down.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="narrow_down.proto.html" title="narrow_down.proto package"
             >next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="narrow_down"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">narrow-down 0.5.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >narrow_down</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">narrow_down package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Christian Krudewig.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>